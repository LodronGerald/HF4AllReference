<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!--<meta name="viewport" content="initial-scale=1.0">-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HF4All Web Reference</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
    <!--<link rel="stylesheet" href="https://petershaggynoble.github.io/MDI-Sandbox/light/?icon=arrow-left">-->
    <!--<script src="https://unpkg.com/konva@9.2.3/konva.min.js"></script>-->
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
 <link rel="stylesheet" href="/resources/demos/style.css">
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
 <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<style>


        #canvas
        {
          width: 100%;
          height: 100%;
          background: #111;
        }

        .mdl-layout--fixed-tabs .mdl-layout__tab-bar-button {
          display: initial;
          color: #ff4081;
          width: 10%;
        }
        .mdl-layout__tab {
          margin-right: 10px;
        }
        .mdl-layout--fixed-tabs .mdl-layout__tab-bar {
          width: 80%;
          padding-left: 0;
          left: +10%;
          position: absolute;
        }
        h6 {
          font-size: 1vw;
          padding: 14px 14px;
          line-height: 1.5vw;
        }
        
        .mdl-layout__tab {
          font-size: 1vw;
        }

        #board-container img:hover { 
        cursor: zoom-in; 
        } 

        @media only screen and (max-width: 1000px) {

        h6 {
          font-size: 2vw;
          padding: 14px 14px;
          line-height: 1.5vw;
        }

        .mdl-layout__tab {
          font-size: 2vw;
        }
             
        .mdl-button{
          width: 30px;
          height: 30px;
          min-width: initial;
        } 

        #zoomIn {
          width: 50px;
          height: 50px;
          min-width: initial;
        }
        #scrollToRight {
          width: 50px;
          height: 50px;
          min-width: initial;
        }
        #scrollToLeft {
          width: 50px;
          height: 50px;
          min-width: initial;
        }
        #scrollToUp {
          width: 50px;
          height: 50px;
          min-width: initial;
        }
        #scrollToDown {
          width: 50px;
          height: 50px;
          min-width: initial;
        }
        
        #zoomOut {
          width: 50px;
          height: 50px;
          min-width: initial;
        }

        #zoomReset {
          width: 50px;
          height: 50px;
          min-width: initial;
        }

        @media only screen and (max-width: 850px) {
        img {
          width: 40%;
        } 
               
        .mdl-button{
          width: 20px;
          height: 20px;
          min-width: initial;
        } 

        #zoomIn {
          width: 50px;
          height: 50px;
          min-width: initial;
        }
        #scrollToRight {
          width: 50px;
          height: 50px;
          min-width: initial;
        }
        #scrollToLeft {
          width: 50px;
          height: 50px;
          min-width: initial;
        }
        #scrollToUp {
          width: 50px;
          height: 50px;
          min-width: initial;
        }
        #scrollToDown {
          width: 50px;
          height: 50px;
          min-width: initial;
        }
        
        #zoomOut {
          width: 50px;
          height: 50px;
          min-width: initial;
        }
        #zoomReset {
          width: 50px;
          height: 50px;
          min-width: initial;
        }
      }
      @media only screen and (max-width: 300px) {
        img {
          width: 30%;
        }
      }

    </style>
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"> </script>
    <script>
        let IDXs = [];
        let MAXs = [];
        let SRCDIR = [];
        let NOTES = [];
        let NOTES2 = [];
        let DEL = [];
        let CREW = 0;
        let THRUSTER = 1;
        let GENERATOR = 2;
        let REACTOR = 3;
        let REFINERY = 4;
        let ROBONAUT = 5;
        let RADIATOR = 6;
        let FREIGHTER = 7;
        let GWTHRUSTER = 8;
        let BERNAL = 9;
        let COLONIST = 10;
        let CONTRACT = 11;
        let PROJECTX = 12;
        let SUMMARY = 13;

        let MAX = 14;

        for(let i=0;i<MAX; ++i){
            IDXs.push(0);
            NOTES.push([]);
            NOTES2.push([]);
            DEL.push([]);
        }
        SRCDIR.push("crew");
        SRCDIR.push("thruster");
        SRCDIR.push("generator");
        SRCDIR.push("reactor");
        SRCDIR.push("refinery");
        SRCDIR.push("robonaut");
        SRCDIR.push("radiator");
        SRCDIR.push("freighter");
        SRCDIR.push("gwthruster");
        SRCDIR.push("bernal");
        SRCDIR.push("colonist");
        SRCDIR.push("contract");           
        SRCDIR.push("promo1");
        SRCDIR.push("tools");
        

        MAXs.push(5);//crew
        MAXs.push(11);//thruster
        MAXs.push(16);//generator
        MAXs.push(11);//reactor
        MAXs.push(11);//refinery
        MAXs.push(11);//robonaut
        MAXs.push(11);//radiator
        MAXs.push(6);//freighter
        MAXs.push(6);//gwthruster
        MAXs.push(12);//bernal
        MAXs.push(35);//colonist
        MAXs.push(12+12+12+6-1);//contract
        MAXs.push(8);//promo1
        MAXs.push(9);//tools

        for(let i=0;i<MAX; ++i){
            
          for(let j=0; j<=MAXs[i];++j){
            NOTES[i].push("");
            DEL[i].push(0);
          }
        }
        let M3IMG = [];
        M3IMG.push("boards/M3yellow.jpg");
        M3IMG.push("boards/M3purple.jpg");
        M3IMG.push("boards/M3white.jpg");
        M3IMG.push("boards/M3green.jpg");
        M3IMG.push("boards/M3red.jpg");
        M3IMG.push("boards/M3gray.jpg");
        
        NOTES[CREW][0] = "<h6><b>Secretary General:</b> With this faction privilege, start the game with two extra Aquas. M2: The two Aquas are given when you Anchor your first Home Bernal.</h6>";
        NOTES[CREW][0] +="<h6><b>Blink Telescope:</b> With this faction privelege, for each prospecting attempt using a raygun platform, you are allowed a single reroll of any size roll (I6.3) made in a prospect operation.</h6>";
        NOTES[CREW][1] = "<h6><b>Taxes:</b> This faction privilege gives you a 1 Aqua bonus from the Pool for each Claim placed or industrialization by any player (including yourself). No tax bonus for Claim Jumping.</h6>";
        NOTES[CREW][1] +="<h6><b>Felonious:</b> As free actions during your Turn, this faction privilege allows you to perform Felonies: Claim Jumping (G4), Murder/Suicide, and Factory Hijacking.</h6>";
        //NOTES[CREW][1] += "<h6><b>M3 Human Kamikaze:</b> Only Player Purple may fire this weapon, which allows him to use sacrificial Humans in combat. Paying a victim a bribe allows you unlimited use of both Human kamikazes (3E5d) and Human dropstones (3D7c) against him that Turn.</h6>";

        NOTES[CREW][2] = "<h6><b>Dharma Refulel:</b> With this faction privilege, site refueling yields are doubled if a Human carrying a glory chit is present.</h6>";
        NOTES[CREW][3] = "<h6><b>Open Source FINAO:</b> With this faction privilege, FINAO only costs 3 Aqua (6 if doubled by any rule).</h6>";
        
        //NOTES[CREW][4] = "<h6><b>Note G1c:</b> Crew dirt thrusters are limited by one fuel tank during a factory or ISRU once-per-turn free action.</h6>";
        //NOTES[CREW][5] = "<h6><b>Note G1c:</b> Crew dirt thrusters are limited by one fuel tank during a factory or ISRU once-per-turn free action.</h6>";
        NOTES[CREW][5] = "<h6><b>Marketeer:</b> With this faction privilege, you always win auction ties (I2e), even if you are not the initiator.</h6>";

        //NOTES[REACTOR][1] = "<h6><b>Project Valkyrie:</b> Only Decommissions cards in its Stack.</h6>";

        //NOTES[REFINERY][3] = "<h6><b>Atmospheric Scoop:</b> Adjacent/Colocated aerostat sites gain 2 hydration for prospecting and refuel.</h6>";

        //NOTES[ROBONAUT][5] = "<h6><b>MagBeam errata:</b> If pushed by Powersat: ISRU = 2 & base thrust = 6.</h6>";
        //NOTES[ROBONAUT][11] = "<h6><b>Lorentz-propelled Microprobe:</b> Reroll only applies to itself.</h6>";
       
        NOTES[COLONIST][0] = "<h6><b>New Venus Future (errata fix):</b> Req = Decommission this card and an Operational thruster with net thrust 7+ on an Industrialized Synodic Comet of yours. Effects = Bust both Venus and the Comet and Decommission all their tokens & unanchor any Bernals (represents the drop in property values prior to the comet-Venus collision), 12 VP.  Note: If this Future is completed, for thematic effect (with no game effect unless play is continued beyond the endgame), place the Venus overlay card (V8b) to show how New Venus will eventually appear.</h6>";
        NOTES[COLONIST][0] += "<h6><b>M3 Note on New Venus Future (1D5a, 3F2g):</b> Use the dislodge operation (3D7) to complete these Futures. Completion allows you to convert any Synodic Comet into a synodic dropstone, in which you do not need to pay a bribe.</h6>";
        
        //NOTES[COLONIST][1] = "<h6><b>Supreme Cult Future (errata fix):</b> Req (Module 0) = Active Law in authority. Effects = You may lobby without removing the delegate used. All Seniority Disks (past and future) migrate to authority. 10 VP if you control this card at the endgame.</h6>";
        //NOTES[COLONIST][1] = "<h6><b>Josephson Implants(errata fix 2C4b):</b> Your FINAO costs are halved (drop factions).</h6>";
       NOTES[COLONIST][4] = "<button onClick=\"showJovian()\">Show Jovians</button>";
       
        //NOTES[COLONIST][6] = "<h6><b>Footfall Future (errata fix):</b> Req = Decommission this card and an Operational thruster with net thrust 7+ on an Industrialized Synodic Comet of yours. This Busts the Site and Decommissions all tokens on it. Effects = Casus belli (1D2c),30 10 VP.</h6>";
        NOTES[COLONIST][6] += "<h6><b>M3 Note on Footfall Future (1D5a, 3F2g):</b> Use the dislodge operation (3D7) to complete these Futures. Completion allows you to convert any Synodic Comet into a synodic dropstone, in which you do not need to pay a bribe.</h6>";
        
        NOTES[COLONIST][9] = "<h6><b>Note:</b> Group Mind Immortalists ability does not work during war/anarchy (2C4j).</h6>";
        //NOTES[COLONIST][10] = "<h6><b>Dyson Bubble Future (errata fix):</b> Req = Both Sites of Mercury industrialized by any player, with this Colonist at one of them. Endgame Effect = 5 VP per Factory (owned by any player) on Mercury.</h6>";
        NOTES[COLONIST][10] = "<h6><b>M3 Note on Dyson Bubble Future (1D5j, 3F2h):</b> May prevent a player from using Solar-Power cards during combat.</h6>";

        //NOTES[COLONIST][11] = "<h6><b>Errata fix:</b> Iceworms no longer make Epic Hazard Operations a free action.</h6>";

        NOTES[COLONIST][18] = "<h6><b>Note:</b> This colonist is from promo pack 1.</h6>";
        NOTES[COLONIST][19] = "<h6><b>Note:</b> This colonist is from promo pack 1.</h6>";

        NOTES[COLONIST][27] = "<button onClick=\"findHaumea()\">Show Haumea</button>";
        NOTES[COLONIST][28] = "<button onClick=\"findEMSunlens()\">Show EM Sunlens</button>";
        NOTES[COLONIST][32] = "<button onClick=\"showAdAstra()\">Show Ad Astra</button>";
        NOTES[COLONIST][34] = "<button onClick=\"showAdAstra()\">Show Ad Astra</button>";

        for(let i = 20; i<=MAXs[COLONIST]; ++i)
          NOTES[COLONIST][i] += "<h6><b>Note:</b> This colonist is from M4.</h6>";

        
        NOTES[COLONIST][32] += "<h6><b>M4 Note on Ad Astra Futures:</b> Players start with an additional 4 Isotopes for each Ad Astra Future that they completed</h6>";
        NOTES[COLONIST][34] += "<h6><b>M4 Note on Ad Astra Futures:</b> Players start with an additional 4 Isotopes for each Ad Astra Future that they completed</h6>";
        
        NOTES[GWTHRUSTER][1] = "<button onClick=\"showCentaur()\">Show Centaurs</button>";
        NOTES[GWTHRUSTER][1] += "<h6><b>M3 Note on Mini-Black Hole (1D3b, 3F2a):</b> May dislodge (3D7a) dropstones from any Size 1 Site. </h6>";
        NOTES[GWTHRUSTER][2] = "<button onClick=\"showIO()\">Show IO</button>";
        NOTES[GWTHRUSTER][2] += "<h6><b>M3 Note on Mass Beam (1D3c, 3F2b):</b> The FV of your guns (3E3b) is their firing rad-hardness minus 1d6. </h6>";
        NOTES[GWTHRUSTER][3] = "<button onClick=\"showTriton()\">Show Triton and Neptune aerostat</button>";
        NOTES[GWTHRUSTER][4] = "<button onClick=\"showH()\">Show H sides</button>";
        NOTES[GWTHRUSTER][5] = "<button onClick=\"showAdAstra()\">Show Ad Astra</button>";
        NOTES[GWTHRUSTER][5] += "<h6><b>M3 Note on Enzmann Starship (1D3f, 3F2c):</b> Destroy any dropstone (1/Turn). </h6>";
        NOTES[GWTHRUSTER][5] += "<h6><b>M4 Note on Ad Astra Futures:</b> Players start with an additional 4 Isotopes for each Ad Astra Future that they completed</h6>";
        NOTES[GWTHRUSTER][6] = "<button onClick=\"showAdAstra()\">Show Ad Astra</button>";
        NOTES[GWTHRUSTER][6] += "<h6><b>M3 Note on Lithiated Ammonia (1D3f, 3F2c):</b> Destroy any dropstone (1/Turn). </h6>";
        NOTES[GWTHRUSTER][6] += "<h6><b>M4 Note on Ad Astra Futures:</b> Players start with an additional 4 Isotopes for each Ad Astra Future that they completed</h6>";

        NOTES[FREIGHTER][0] = "<button onClick=\"showTerraformFuture()\">Show future positions on map</button>";
        NOTES[FREIGHTER][1] = "<h6><b>M3 Note on Beehive Ark (1D4b, 3F2d):</b> Your Tokens on Size 1 Sites are immune to all combat. </h6>";
        NOTES[FREIGHTER][2] = "<button onClick=\"showExoplanetHuntFuture()\">Show Sedna</button>";
        NOTES[FREIGHTER][4] = "<button onClick=\"showKreuzSungrazer()\">Show Kreuz Sungrazer</button>";
        NOTES[FREIGHTER][4] += "<h6><b>M3 Note on Golden Apples (1D4e, 3F2f):</b> FINAO is no longer a war restriction (3D4i) for all players. If other players pay for FINAO (whether Aqua or Isotopes), you receive the payment. </h6>";
        
        NOTES[FREIGHTER][5] = "<h6><b>M3 Note on Antimatter (1D4f, 3F2e):</b> Gain amat bombs (3E3d), which you can use without paying Aquas. </h6>";
        NOTES[FREIGHTER][6] = "<button onClick=\"showSunlens()\">Show Sunlenses</button>";
       

        NOTES[BERNAL][0] = "<h6><b>M3 Note:</b> (Promoted) Your Crew and Bernals can fire Antimatter Bombs.</h6>";
        NOTES[BERNAL][1] = "<h6><b>M3 Note:</b> Red Cross Token. No combat is allowed to or from Bernal. Immune to No Home Bernal restrictions.</h6>";
        NOTES[BERNAL][2] = "<h6><b>L1 Climate Control Bernal:</b> Home = If in the L1 Home Orbit, you are always the 1st player (without swapping the Sunspot Cube), superseding all other claimants. Promoted = +2 VP per Dirtside for this Bernal.</h6>";
        
        NOTES[BERNAL][10] = "<h6><b>Note:</b> This bernal is from 6th player expansion</h6>";
        NOTES[BERNAL][11] = "<h6><b>Note:</b> This bernal is from 6th player expansion</h6>";
        NOTES[BERNAL][12] = "<h6><b>Note:</b> This bernal is from Promo Pack 1</h6>";
       
        //NOTES[BERNAL][2] = "<h6><b>Errata fix:</b> L1 Climate Control Bernal must be Anchored in L1 to get Home ability.</h6>";
        //NOTES[BERNAL][5] = "<h6><b>Errata fix:</b> Epic Hazard Roll to Anchor in Home Orbit.</h6>";
        NOTES[BERNAL][5] = "<h6><b>M3 Note:</b> Immune to boost & homesteading restrictions. With an Epic Hazard Operation you may build Space Elevator over a (half)lander burn. Doubles FINAO costs for all players.</h6>";
        NOTES[BERNAL][6] = "<h6><b>M3 Note:</b> You may fire Beamed Gray Goo (pay a bribe).</h6>";
        
        //NOTES[BERNAL][8] = "<h6><b>Errata fix:</b> Epic Hazard Roll to Anchor at GEO.</h6>";
        NOTES[BERNAL][8] = "<h6><b>M3 Note:</b> Immune to boost & homesteading restrictions. With an Epic Hazard Operation you may build Space Elevator over a (half)lander burn. Doubles FINAO costs for all players.</h6>";
        
        NOTES2[CREW][1] = "<h6><b>Note:</b> Amat bombs are not used if you are the defender.</h6>";
        NOTES2[CREW][1] += "<h6><b>War Crimes:</b> Player Purple has this Ability, which allows him to perform Felonies against allies during War/ Anarchy (3A3a), perform a sneak attack or dropstone attack without paying a bribe (3B3c,e), to use human kamikazes (3E5d) and manned dropstones (3D7c), and suffer no consequences from genocide (3E2m).</h6>";
        NOTES2[CREW][1] += "<h6><b>Felonies 3A3a:</b> Only player purple can use felonies against allies.</h6>";
        
        NOTES2[CREW][2] = "<h6><b>Errata fix:</b> Your Crew/Colonists (that have ISRU platforms) are marines who do not need buggies to make a buggy attack (3E4).</h6>";
        NOTES2[CREW][4] = "<h6><b>Note:</b> Jammers are never used if you are the defender.</h6>";
 
        let shuffleArray = [];
        for(let i=0; i<MAX;++i){
          shuffleArray.push([]);
          for(let j=0; j<=MAXs[i];++j){
            shuffleArray[i].push(j);
          }
        }

        let contractArray = [];
        for(let i=0; i< 12;++i)
          contractArray.push(0);
        for(let i=0; i< 12;++i)
          contractArray.push(1);
        for(let i=0; i< 12;++i)
          contractArray.push(2);
        for(let i=0; i< 6;++i)
          contractArray.push(3);

        colonistArray = [];
        for(let i=0; i<14; ++i)
          colonistArray.push(0);
        for(let i = 14; i<36; ++i)
          colonistArray.push(1);

        let started = 0;
        var canvas;
        var ctx;
        var cameraOffset;

        let cameraZoom = 1;
        let MAX_ZOOM = 5;
        let MIN_ZOOM = 0.1;
        let SCROLL_SENSITIVITY = 0.005;  

        function generateImage(){
          var imageObj = new Image();
          var image = new Konva.Image({
              x: 0,
              y: 0,
              image: imageObj,
              width: 10817,
              height: 7287
          });

          imageObj.src = 'boards/Map.jpg';
          return image;
        }
        function repositionStage() {
          if(panning){
            var zoomLevel = 2;
              layer.on('mouseenter', function () {
                layer.scale({
                  x: zoomLevel,
                  y: zoomLevel,
                });
              });
          }
          else{
          var dx = scrollContainer.scrollLeft - PADDING;
          var dy = scrollContainer.scrollTop - PADDING;
          
          stage.container().style.transform =
            'translate(' + dx + 'px, ' + dy + 'px)';
          stage.x(-dx);
          stage.y(-dy);
          }

        }
        
        function init() {
          if(!started) {

           // findLocation  = document.getElementById("findLocation");



            canvas = document.getElementById("canvas");
            ctx = canvas.getContext('2d');

            //cameraOffset = { x: window.innerWidth/2, y: window.innerHeight/2 }
            cameraOffset = { x: 0, y: 0 }

            if(!isTouchDevice()){
            canvas.addEventListener('mousedown', onPointerDown);
            canvas.addEventListener('touchstart', (e) => handleTouch(e, onPointerDown));
            canvas.addEventListener('mouseup', onPointerUp);
            canvas.addEventListener('touchend',  (e) => handleTouch(e, onPointerUp));
            canvas.addEventListener('mousemove', onPointerMove);
            canvas.addEventListener('touchmove', (e) => handleTouch(e, onPointerMove));
            canvas.addEventListener( 'wheel', (e) => adjustZoom(e.deltaY*SCROLL_SENSITIVITY));
            canvas.addEventListener ("mouseout", onPointerUp);
            }
            // Ready, set, go
            started = 1;
           // draw();

            requestAnimationFrame( draw );
            
            //default selection of option does not work...
            prev(THRUSTER);
            next(THRUSTER);
            prev(REFINERY);
            next(REFINERY);
            prev(ROBONAUT);
            next(ROBONAUT);
            prev(COLONIST);
            next(COLONIST);
            prev(CONTRACT);
            next(CONTRACT);
          }
        }
        var image;
        var currentId=-1;
        let FAC = 4;
        let WIDTH = 5409/FAC;
        let HEIGHT = 3644/FAC; 
        function drawCircle(x,y,r)
        {
            ctx.save();
            ctx.beginPath();
            ctx.arc(x, y, r, 0, 2 * Math.PI);
            ctx.strokeStyle= '#FF0000';
            ctx.lineWidth = 10;
            ctx.fillStyle = 'rgba(0, 0, 0, 0)';
            ctx.stroke();
            ctx.fill();
            ctx.restore();
        }

        function draw()
        {
           init();
            canvas.width = WIDTH;
            canvas.height =HEIGHT;

            //canvas.width = window.innerWidth;
            //canvas.height = window.innerHeight;
            
            // Translate to the canvas centre before zooming - so you'll always zoom on what you're looking directly at
            ctx.translate( window.innerWidth / 2, window.innerHeight / 2 );
            ctx.scale(cameraZoom, cameraZoom);
            ctx.translate( -window.innerWidth / 2 + cameraOffset.x, -window.innerHeight / 2 + cameraOffset.y );
            
            if(currentId != boards.selectedIndex){
            image = new Image(); 
            //boardChanged();
            ctx.clearRect(0, 0, WIDTH, HEIGHT);}
          
          if(boards.selectedIndex == 0) {
            image.src = "boards/Sun.jpg";

            ctx.drawImage(image, 
              0,0,           // clip from the source image with top-left at 
              1397,987,         // clip 800x600px from the source
              0,0  ,            // paint the clipping at [0,0] on the canvas
              WIDTH,HEIGHT          // use the same size that was clipped
            );
          }
          if(boards.selectedIndex == 1) {
            image.src = "boards/Player.jpg";
            ctx.drawImage(image, 
              0,0,           // clip from the source image with top-left at 
              1430,1017,         // clip 800x600px from the source
              0,0  ,            // paint the clipping at [0,0] on the canvas
              WIDTH,HEIGHT          // use the same size that was clipped
            );
          }
          else if(boards.selectedIndex == 2) {
            image.src = "boards/Bernal.jpg";
            let f = HEIGHT / 852;
            ctx.drawImage(image, 
              0,0,           // clip from the source image with top-left at 
              WIDTH/f,852,         // clip 800x600px from the source
              0,0  ,            // paint the clipping at [0,0] on the canvas
              WIDTH,HEIGHT          // use the same size that was clipped
            );
          }
          else if(boards.selectedIndex == 3) {
            image.src = "boards/Freighter.jpg";
            let f = HEIGHT / 846;
            ctx.drawImage(image, 
              0,0,           // clip from the source image with top-left at 
              WIDTH/f,846,         // clip 800x600px from the source
              0,0  ,            // paint the clipping at [0,0] on the canvas
              WIDTH,HEIGHT          // use the same size that was clipped
            );
          }
          else if(boards.selectedIndex == 4) {
            image.src = "boards/M0A.jpg";
            ctx.drawImage(image, 
              0,0,           // clip from the source image with top-left at 
              1397,996,         // clip 800x600px from the source
              0,0  ,            // paint the clipping at [0,0] on the canvas
              WIDTH,HEIGHT          // use the same size that was clipped
            );
          }
          else if(boards.selectedIndex == 5) {
            image.src = "boards/M3As.jpg";
            ctx.drawImage(image, 
              0,0,           // clip from the source image with top-left at 
              1410,1001,         // clip 800x600px from the source
              0,0  ,            // paint the clipping at [0,0] on the canvas
              WIDTH,HEIGHT          // use the same size that was clipped
            );
          }
          else if(boards.selectedIndex == 6) {
            image.src = "boards/M3VPs.jpg";
            ctx.drawImage(image, 
              0,0,           // clip from the source image with top-left at 
              912,640,         // clip 800x600px from the source
              0,0  ,            // paint the clipping at [0,0] on the canvas
              WIDTH,HEIGHT          // use the same size that was clipped
            );
          }
          else if(boards.selectedIndex == 7) {
            image.src = "boards/M3Battle.jpg";
            ctx.drawImage(image, 
              0,0,           // clip from the source image with top-left at 
              901,667,         // clip 800x600px from the source
              0,0  ,            // paint the clipping at [0,0] on the canvas
              WIDTH,HEIGHT          // use the same size that was clipped
            );
          }
          else if(boards.selectedIndex == 8) {
            image.src = "boards/M4.jpg";
            ctx.drawImage(image, 
              0,0,           // clip from the source image with top-left at 
              1494,1057,         // clip 800x600px from the source
              0,0  ,            // paint the clipping at [0,0] on the canvas
              WIDTH,HEIGHT          // use the same size that was clipped
            );
          }
          else if(boards.selectedIndex == 9) {
            image.src = "boards/M4-2.jpg";
            ctx.drawImage(image, 
              0,0,           // clip from the source image with top-left at 
              1493,1054,         // clip 800x600px from the source
              0,0  ,            // paint the clipping at [0,0] on the canvas
              WIDTH,HEIGHT          // use the same size that was clipped
            );
          }
          else if(boards.selectedIndex == 10) {
            image.src = "boards/MapSmall.jpg";

            ctx.drawImage(image, 
              0,0,           // clip from the source image with top-left at 
              5409,3644 ,         // clip 800x600px from the source
              0,0  ,            // paint the clipping at [0,0] on the canvas
              WIDTH,HEIGHT          // use the same size that was clipped
            );
          }
          else if(boards.selectedIndex == 11) {
            image.src = "boards/VenusMapSmall.jpg";
            ctx.drawImage(image, 
              0,0,           // clip from the source image with top-left at 
              5409,3644 ,         // clip 800x600px from the source
              0,0  ,            // paint the clipping at [0,0] on the canvas
              WIDTH,HEIGHT          // use the same size that was clipped
            );
          }
          for(let i =0; i<findPos.length; ++i)
          {
            if(findPos[i].length == 2){
              //ctx.fillStyle = "#991111";
              drawCircle(findPos[i][0],findPos[i][1],50,50);
            }
            else if(findPos[i].length == 3){
              drawCircle(findPos[i][0],findPos[i][1],findPos[i][2],findPos[i][2]);
            }
          }
          currentId = boards.selectedIndex;
            /*
            image.src = 'boards/MapSmall.jpg';

            ctx.drawImage(image, 
              0,0,           // clip from the source image with top-left at [1600,0]
              5409,3644 ,         // clip 800x600px from the source
              0,0  ,            // paint the clipping at [0,0] on the canvas
              5409,3644          // use the same 800x600 size that was clipped
            );*/
            /*ctx.clearRect(0,0, window.innerWidth, window.innerHeight);
            ctx.fillStyle = "#991111";
            drawRect(-50,-50,100,100);
            
            ctx.fillStyle = "#eecc77";
            drawRect(-35,-35,20,20);
            drawRect(15,-35,20,20);
            drawRect(-35,15,70,20);
            
            ctx.fillStyle = "#fff";
            drawText("Simple Pan and Zoom Canvas", -255, -100, 32, "courier");
            
            ctx.rotate(-31*Math.PI / 180);
            ctx.fillStyle = `#${(Math.round(Date.now()/40)%4096).toString(16)}`;
            drawText("Now with touch!", -110, 100, 32, "courier");
            
            ctx.fillStyle = "#fff";
            ctx.rotate(31*Math.PI / 180);
            
            drawText("Wow, you found me!", -260, -2000, 48, "courier");
            */
            //requestAnimationFrame( draw );
        }
        findPos = [];

        //findPosX = -1;
        //findPosY = -1;

        function findSide(){
          if(!isBigImage())
          {
            boards.selectedIndex = 10;
          }
          zoomReset();
          let i=0;
          for(const child of findLocation.children)
          {
            if(i == findLocation.selectedIndex)
            {
              let out = child.outerHTML;
              let b = out.indexOf("x=");
              b+=3;
              let e = out.indexOf(" ", b);
              e-=1;
              let n = out.substr(b, e-b);

              findPos = [];
              findPos.push([]);

              findPos[0].push(parseInt(n)/(2*FAC));
              b = out.indexOf("y=");
              b+=3;
              e = out.indexOf(">", b);
              e-=1;
              n = out.substr(b, e-b);
              findPos[0].push(parseInt(n)/(2*FAC));
            }
            ++i;
          }
          /*
          if(findLocation.selectedIndex == 0) {
            findPosX = 9320/FAC;
            findPosY = 5800/FAC;
            
          }*/
          requestAnimationFrame( draw );
        }
        function zoomIn()
        {
          cameraZoom+=0.25;
         // ctx.translate( window.innerWidth / 2, window.innerHeight / 2 );
            ctx.scale(cameraZoom, cameraZoom);
            //ctx.translate( -window.innerWidth / 2 + cameraOffset.x, -window.innerHeight / 2 + cameraOffset.y );

          //ctx.draw();
          requestAnimationFrame( draw );
        }
        function scrollToLeft()
        {
          cameraOffset.x += 35;
          requestAnimationFrame( draw );
        }
        function scrollToRight()
        {
          cameraOffset.x -= 35;
          requestAnimationFrame( draw );
        }
        function scrollToUp()
        {
          cameraOffset.y += 35;
          requestAnimationFrame( draw );
        }
        function scrollToDown()
        {
          cameraOffset.y -= 35;
          requestAnimationFrame( draw );
        }
        function zoomOut()
        {
          cameraZoom-=0.25;
          //ctx.translate( window.innerWidth / 2, window.innerHeight / 2 );
            ctx.scale(cameraZoom, cameraZoom);
            //ctx.translate( -window.innerWidth / 2 + cameraOffset.x, -window.innerHeight / 2 + cameraOffset.y );

          //ctx.draw();
          requestAnimationFrame( draw );
        }
        function zoomReset()
        {
          cameraZoom=1;
          ctx.scale(cameraZoom, cameraZoom);
            ctx.translate(  - cameraOffset.x, - cameraOffset.y );
            cameraOffset.x =0;
            cameraOffset.y =0;
            findPos = [];
            //findPosX = -1;
            //findPosY = -1;
          requestAnimationFrame( draw );
        }
        // Gets the relevant location from a mouse or single touch event
        function getEventLocation(e)
        {
            if (e.touches && e.touches.length == 1)
            {
                return { x:e.touches[0].clientX, y: e.touches[0].clientY };
            }
            else if (e.clientX && e.clientY)
            {
                return { x: e.clientX, y: e.clientY }   ;     
            }
        }

        function showSunlens()
        {
          document.getElementById('b').click();
          boards.selectedIndex = 10;
          zoomReset();
          
          let i=0;
          findPos.push([]);
          findPos[i].push(1714 / (2*FAC));
          findPos[i].push(2532 / (2*FAC));
          findPos[i].push(50);
          ++i;
          findPos.push([]);
          findPos[i].push(747 / (2*FAC));
          findPos[i].push(498 / (2*FAC));
          findPos[i].push(50);
        }
        function showH()
        {
          document.getElementById('b').click();
          boards.selectedIndex = 10;
          zoomReset();
          
          let i=0;
          findPos.push([]);
          findPos[i].push(372 / (2*FAC));
          findPos[i].push(741 / (2*FAC));
          findPos[i].push(50);
          ++i;
          findPos.push([]);
          findPos[i].push(1147 / (2*FAC));
          findPos[i].push(605 / (2*FAC));
          findPos[i].push(50);
          ++i;
          findPos.push([]);
          findPos[i].push(1849 / (2*FAC));
          findPos[i].push(2123 / (2*FAC));
          findPos[i].push(50);
          ++i;
          findPos.push([]);
          findPos[i].push(1032 / (2*FAC));
          findPos[i].push(4105 / (2*FAC));
          findPos[i].push(50);
          ++i;
          findPos.push([]);
          findPos[i].push(2169 / (2*FAC));
          findPos[i].push(4047 / (2*FAC));
          findPos[i].push(50);
          ++i;
          findPos.push([]);
          findPos[i].push(1607 / (2*FAC));
          findPos[i].push(6320 / (2*FAC));
          findPos[i].push(50);
          ++i;
          findPos.push([]);
          findPos[i].push(3444 / (2*FAC));
          findPos[i].push(5007 / (2*FAC));
          findPos[i].push(50);
          ++i;
          findPos.push([]);
          findPos[i].push(5971 / (2*FAC));
          findPos[i].push(5803 / (2*FAC));
          findPos[i].push(50);
          ++i;
          findPos.push([]);
          findPos[i].push(9216 / (2*FAC));
          findPos[i].push(5089 / (2*FAC));
          findPos[i].push(50);
        }
        function findEMSunlens()
        {
          document.getElementById('b').click();
          boards.selectedIndex = 10;
          zoomReset();
          
          let i=0;
          findPos.push([]);
          findPos[i].push(743 / (2*FAC));
          findPos[i].push(496 / (2*FAC));
          findPos[i].push(50);
        }
        function findHaumea()
        {
          document.getElementById('b').click();
          boards.selectedIndex = 10;
          zoomReset();
          
          let i=0;
          findPos.push([]);
          findPos[i].push(848 / (2*FAC));
          findPos[i].push(728 / (2*FAC));
          findPos[i].push(50);
        }
        function showJovian()
        {
          document.getElementById('b').click();
          boards.selectedIndex = 10;
          zoomReset();
          
          let i=0;
          findPos.push([]);
          findPos[i].push(3340 / (2*FAC));
          findPos[i].push(6170 / (2*FAC));
          findPos[i].push(140);
          ++i;
          findPos.push([]);
          findPos[i].push(7930 / (2*FAC));
          findPos[i].push(904 / (2*FAC));
          findPos[i].push(190);
        }
        function showAdAstra()
        {
          document.getElementById('b').click();
          boards.selectedIndex = 10;
          zoomReset();
          
          let i=0;
          findPos.push([]);
          findPos[i].push(325 / (2*FAC));
          findPos[i].push(352 / (2*FAC));
          findPos[i].push(50);
          ++i;
          findPos.push([]);
          findPos[i].push(4572 / (2*FAC));
          findPos[i].push(2898 / (2*FAC));
          findPos[i].push(50);
          ++i;
          findPos.push([]);
          findPos[i].push(1541 / (2*FAC));
          findPos[i].push(2579 / (2*FAC));
          findPos[i].push(50);
        }
        function showTriton()
        {
          document.getElementById('b').click();
          boards.selectedIndex = 10;
          zoomReset();
          
          let i=0;
          findPos.push([]);
          findPos[i].push(2627 / (2*FAC));
          findPos[i].push(1167 / (2*FAC));
          findPos[i].push(50);
          ++i;
          findPos.push([]);
          findPos[i].push(1827 / (2*FAC));
          findPos[i].push(2116 / (2*FAC));
          findPos[i].push(50);
        }
        function showIO()
        {
          document.getElementById('b').click();
          boards.selectedIndex = 10;
          zoomReset();
          
          let i=0;
          findPos.push([]);
          findPos[i].push(3766 / (2*FAC));
          findPos[i].push(2211 / (2*FAC));
          findPos[i].push(50);

        }
        function showCentaur()
        {
          document.getElementById('b').click();
          boards.selectedIndex = 10;
          zoomReset();
          
          let i=0;
          findPos.push([]);
          findPos[i].push(4224 / (2*FAC));
          findPos[i].push(570 / (2*FAC));
          findPos[i].push(50);
          ++i;
          findPos.push([]);
          findPos[i].push(1946 / (2*FAC));
          findPos[i].push(3249 / (2*FAC));
          findPos[i].push(50);
          ++i;
          findPos.push([]);
          findPos[i].push(1707 / (2*FAC));
          findPos[i].push(2949 / (2*FAC));
          findPos[i].push(50);
          ++i;
          findPos.push([]);
          findPos[i].push(1005 / (2*FAC));
          findPos[i].push(4717 / (2*FAC));
          findPos[i].push(50);
          ++i;
          findPos.push([]);
          findPos[i].push(4742 / (2*FAC));
          findPos[i].push(694 / (2*FAC));
          findPos[i].push(50);
          ++i;
          findPos.push([]);
          findPos[i].push(3909 / (2*FAC));
          findPos[i].push(1428 / (2*FAC));
          findPos[i].push(50);
          ++i;
          findPos.push([]);
          findPos[i].push(9047 / (2*FAC));
          findPos[i].push(432 / (2*FAC));
          findPos[i].push(50);
          ++i;
          findPos.push([]);
          findPos[i].push(9635 / (2*FAC));
          findPos[i].push(523 / (2*FAC));
          findPos[i].push(50);
          ++i;
          findPos.push([]);
          findPos[i].push(2879 / (2*FAC));
          findPos[i].push(4575 / (2*FAC));
          findPos[i].push(50);
        }
        function showKreuzSungrazer()
        {
          document.getElementById('b').click();
          boards.selectedIndex = 10;
          zoomReset();
          
          let i=0;
          findPos.push([]);
          findPos[i].push(2161 / (2*FAC));
          findPos[i].push(4050 / (2*FAC));
          findPos[i].push(50);
        }
        function showExoplanetHuntFuture()
        {
          document.getElementById('b').click();
          boards.selectedIndex = 10;
          zoomReset();
          
          let i=0;
          findPos.push([]);
          findPos[i].push(384 / (2*FAC));
          findPos[i].push(738 / (2*FAC));
          findPos[i].push(35);
        }
        function showTerraformFuture()
        {
          document.getElementById('b').click();
          boards.selectedIndex = 10;
          zoomReset();
          
          let i=0;
          findPos.push([]);
          findPos[i].push(2699 / (2*FAC));
          findPos[i].push(6818 / (2*FAC));
          findPos[i].push(35);
          ++i;

          findPos.push([]);
          findPos[i].push(2541 / (2*FAC));
          findPos[i].push(6646 / (2*FAC));
          findPos[i].push(35);
          ++i;
          
          findPos.push([]);
          findPos[i].push(2557 / (2*FAC));
          findPos[i].push(6318 / (2*FAC));
          findPos[i].push(35);
          ++i;
          
          findPos.push([]);
          findPos[i].push(1618 / (2*FAC));
          findPos[i].push(6315 / (2*FAC));
          findPos[i].push(50);
          ++i;
          
          findPos.push([]);
          findPos[i].push(1005 / (2*FAC));
          findPos[i].push(4089 / (2*FAC));
          findPos[i].push(50);
          ++i;
          
          findPos.push([]);
          findPos[i].push(1812 / (2*FAC));
          findPos[i].push(2114 / (2*FAC));
          findPos[i].push(50);
          ++i;
          
          findPos.push([]);
          findPos[i].push(7372 / (2*FAC));
          findPos[i].push(6118 / (2*FAC));
          findPos[i].push(50);
          ++i;
          
          requestAnimationFrame( draw );

        }
        function drawRect(x, y, width, height)
        {
            ctx.fillRect( x, y, width, height );
        }

        function drawText(text, x, y, size, font)
        {
            ctx.font = `${size}px ${font}`;
            ctx.fillText(text, x, y);
        }
        function isTouchDevice() {
          return (('ontouchstart' in window) ||
            (navigator.maxTouchPoints > 0) ||
            (navigator.msMaxTouchPoints > 0));
        }

        let isDragging = false;
        let dragStart = { x: 0, y: 0 }

        function onPointerDown(e)
        {
            isDragging = true;
            dragStart.x = getEventLocation(e).x/cameraZoom - cameraOffset.x;
            dragStart.y = getEventLocation(e).y/cameraZoom - cameraOffset.y;
        }

        function onPointerUp(e)
        {
            isDragging = false;
            initialPinchDistance = null;
            lastZoom = cameraZoom;
        }

        function onPointerMove(e)
        {
            if (isDragging)
            {
                cameraOffset.x = (getEventLocation(e).x/cameraZoom - dragStart.x);
                cameraOffset.y = (getEventLocation(e).y/cameraZoom - dragStart.y);
                requestAnimationFrame( draw );
            }
        }

        function handleTouch(e, singleTouchHandler)
        {
            if ( e.touches.length == 1 )
            {
                singleTouchHandler(e);
            }
            else if (e.type == "touchmove" && e.touches.length == 2)
            {
                isDragging = false;
                handlePinch(e);
            }
        }

        let initialPinchDistance = null;
        let lastZoom = cameraZoom;

        function handlePinch(e)
        {
            e.preventDefault();
            
            let touch1 = { x: e.touches[0].clientX, y: e.touches[0].clientY }
            let touch2 = { x: e.touches[1].clientX, y: e.touches[1].clientY }
            
            // This is distance squared, but no need for an expensive sqrt as it's only used in ratio
            let currentDistance = (touch1.x - touch2.x)**2 + (touch1.y - touch2.y)**2;
            
            if (initialPinchDistance == null)
            {
                initialPinchDistance = currentDistance;
            }
            else
            {
                adjustZoom( null, currentDistance/initialPinchDistance );
            }
        }
        
        function adjustZoom(zoomAmount, zoomFactor)
        {
          if(isBigImage())
          {
            if (!isDragging)
            {
                if (zoomAmount)
                {
                    cameraZoom += zoomAmount;
                }
                else if (zoomFactor)
                {
                    //console.log(zoomFactor);
                    cameraZoom = zoomFactor*lastZoom;
                }
                
                cameraZoom = Math.min( cameraZoom, MAX_ZOOM );
                cameraZoom = Math.max( cameraZoom, MIN_ZOOM );
                
                //console.log(zoomAmount);
            }
            requestAnimationFrame( draw );
          }
        }
        setTimeout(init, 1); 
        var intervalId = window.setInterval(function(){
  draw()
}, 1000);

        setInterval(requestAnimationFrame( draw ), 500); 

        function isBigImage(){
          if(boards.selectedIndex == 10 || boards.selectedIndex == 11)
            return 1;
          else
            return 0;
        }
        function boardChanged(){
         
          findPos = [];
          //findPosX = -1;
          //findPosY = -1;

          ctx.clearRect(0, 0, WIDTH, HEIGHT);
          

          //zoomReset();
          cameraZoom=1;

            ctx.scale(cameraZoom, cameraZoom);
            ctx.translate(  - cameraOffset.x, - cameraOffset.y );
            cameraOffset.x =0;
            cameraOffset.y =0;
          //repositionStage();
          
          if(boards.selectedIndex == 0) {
            image.src = "boards/Sun.jpg";

            ctx.drawImage(image, 
              0,0,           // clip from the source image with top-left at 
              1397,987,         // clip 800x600px from the source
              0,0  ,            // paint the clipping at [0,0] on the canvas
              WIDTH,HEIGHT          // use the same size that was clipped
            );
          }
          if(boards.selectedIndex == 1) {
            image.src = "boards/Player.jpg";
            ctx.drawImage(image, 
              0,0,           // clip from the source image with top-left at 
              1430,1017,         // clip 800x600px from the source
              0,0  ,            // paint the clipping at [0,0] on the canvas
              WIDTH,HEIGHT          // use the same size that was clipped
            );
          }
          else if(boards.selectedIndex == 2) {
            image.src = "boards/Bernal.jpg";
            let f = HEIGHT / 852;
            ctx.drawImage(image, 
              0,0,           // clip from the source image with top-left at 
              WIDTH/f,852,         // clip 800x600px from the source
              0,0  ,            // paint the clipping at [0,0] on the canvas
              WIDTH,HEIGHT          // use the same size that was clipped
            );
          }
          else if(boards.selectedIndex == 3) {
            image.src = "boards/Freighter.jpg";
            let f = HEIGHT / 846;
            ctx.drawImage(image, 
              0,0,           // clip from the source image with top-left at 
              WIDTH/f,846,         // clip 800x600px from the source
              0,0  ,            // paint the clipping at [0,0] on the canvas
              WIDTH,HEIGHT          // use the same size that was clipped
            );
          }
          else if(boards.selectedIndex == 4) {
            image.src = "boards/M0A.jpg";
            ctx.drawImage(image, 
              0,0,           // clip from the source image with top-left at 
              1397,996,         // clip 800x600px from the source
              0,0  ,            // paint the clipping at [0,0] on the canvas
              WIDTH,HEIGHT          // use the same size that was clipped
            );
          }
          else if(boards.selectedIndex == 5) {
            image.src = "boards/M3As.jpg";
            ctx.drawImage(image, 
              0,0,           // clip from the source image with top-left at 
              1410,1001,         // clip 800x600px from the source
              0,0  ,            // paint the clipping at [0,0] on the canvas
              WIDTH,HEIGHT          // use the same size that was clipped
            );
          }
          else if(boards.selectedIndex == 6) {
            image.src = "boards/M3VPs.jpg";
            ctx.drawImage(image, 
              0,0,           // clip from the source image with top-left at 
              912,640,         // clip 800x600px from the source
              0,0  ,            // paint the clipping at [0,0] on the canvas
              WIDTH,HEIGHT          // use the same size that was clipped
            );
          }
          else if(boards.selectedIndex == 7) {
            image.src = "boards/M3Battle.jpg";
            ctx.drawImage(image, 
              0,0,           // clip from the source image with top-left at 
              901,667,         // clip 800x600px from the source
              0,0  ,            // paint the clipping at [0,0] on the canvas
              WIDTH,HEIGHT          // use the same size that was clipped
            );
          }
          else if(boards.selectedIndex == 8) {
            image.src = "boards/M4.jpg";
            ctx.drawImage(image, 
              0,0,           // clip from the source image with top-left at 
              1494,1057,         // clip 800x600px from the source
              0,0  ,            // paint the clipping at [0,0] on the canvas
              WIDTH,HEIGHT          // use the same size that was clipped
            );
          }
          else if(boards.selectedIndex == 9) {
            image.src = "boards/M4-2.jpg";
            ctx.drawImage(image, 
              0,0,           // clip from the source image with top-left at 
              1493,1054,         // clip 800x600px from the source
              0,0  ,            // paint the clipping at [0,0] on the canvas
              WIDTH,HEIGHT          // use the same size that was clipped
            );
          }
          else if(boards.selectedIndex == 10) {
            image.src = "boards/MapSmall.jpg";

            ctx.drawImage(image, 
              0,0,           // clip from the source image with top-left at 
              5409,3644 ,         // clip 800x600px from the source
              0,0  ,            // paint the clipping at [0,0] on the canvas
              WIDTH,HEIGHT          // use the same size that was clipped
            );
          }
          else if(boards.selectedIndex == 11) {
            image.src = "boards/VenusMapSmall.jpg";
            ctx.drawImage(image, 
              0,0,           // clip from the source image with top-left at 
              5409,3644 ,         // clip 800x600px from the source
              0,0  ,            // paint the clipping at [0,0] on the canvas
              WIDTH,HEIGHT          // use the same size that was clipped
            );
          }
          requestAnimationFrame( draw );
        }

        function randomShuffle(){

          let c = [];
          for(let idx = 0; idx<MAX; ++idx){
            let counter = 0;
            for(let i = 0; i<=IDXs[idx];++i){
              let h = shuffleArray[idx][i];
              if(DEL[idx][h] == 0){
                if(idx == CONTRACT){
                  counter += contractArray[h] == contracts.selectedIndex;
                }
                else if(idx == COLONIST){
                  counter += colonistArray[h] == colonists.selectedIndex;
                }
                else           
                  counter++;
              }
            }
            c.push(counter);

          }

          for(let k=0; k<shuffleArray.length;++k){
            for (let i = shuffleArray[k].length - 1; i > 0; i--) {
              const j = Math.floor(Math.random() * (i + 1));
              const temp = shuffleArray[k][i];

              shuffleArray[k][i] = shuffleArray[k][j];
              shuffleArray[k][j] = temp;
            }
          }
          var selectorId = document.querySelector('.mdl-layout');
          selectorId.MaterialLayout.toggleDrawer();
 
          for(let idx=0; idx<MAX; ++idx){
              next(idx);

              let counter = 0;
              for(let i = 0; i<=IDXs[idx];++i){
                let h = shuffleArray[idx][i];
                if(DEL[idx][h] == 0){
                  if(idx == CONTRACT){
                    counter += contractArray[h] == contracts.selectedIndex;
                  }
                  else if(idx == COLONIST){
                    counter += colonistArray[h] == colonists.selectedIndex;
                  }
                  else           
                    counter++;
                }
              }

              while(c[idx]!= counter){
                prev(idx);

                counter = 0;
                for(let i = 0; i<=IDXs[idx];++i){
                  let h = shuffleArray[idx][i];
                  if(DEL[idx][h] == 0){
                    if(idx == CONTRACT){
                      counter += contractArray[h] == contracts.selectedIndex;
                    }
                    else if(idx == COLONIST){
                      counter += colonistArray[h] == colonists.selectedIndex;
                    }
                    else           
                      counter++;
                  }
                }
              }
              
          }

        }
        function getMax(idx){
          if(idx != CONTRACT)
            return MAXs[idx];
          else
          {
            if(contracts.selectedIndex == 3)
              return 5;
            else
              return 11;
          }
        }
        function inspirationShuffle(){
          let c = [];
          for(let idx = 0; idx<MAX; ++idx){
            let counter = 0;
            for(let i = 0; i<=IDXs[idx];++i){
              let h = shuffleArray[idx][i];
              if(DEL[idx][h] == 0){
                if(idx == CONTRACT){
                  counter += contractArray[h] == contracts.selectedIndex;
                }
                else if(idx == COLONIST){
                  counter += colonistArray[h] == colonists.selectedIndex;
                }
                else           
                  counter++;
              }
            }
            c.push(counter);

          }
          
          for(let idx=0; idx<MAX;++idx){
              if(idx == CONTRACT){
                let h = shuffleArray[idx][0];

                  for (let i = 0; i < 12 - 1; ++i) {
                    shuffleArray[idx][i] = shuffleArray[idx][i+1];

                  }
                  shuffleArray[idx][12 - 1]=h;
                  //
                  h = shuffleArray[idx][12];

                  for (let i = 12; i < 24 - 1; ++i) {
                    shuffleArray[idx][i] = shuffleArray[idx][i+1];

                  }
                  shuffleArray[idx][24 - 1]=h;
                  //
                  h = shuffleArray[idx][24];

                  for (let i = 24; i < 36 - 1; ++i) {
                    shuffleArray[idx][i] = shuffleArray[idx][i+1];

                  }
                  shuffleArray[idx][36 - 1]=h;
                  //
                  h = shuffleArray[idx][36];

                  for (let i = 36; i < 42 - 1; ++i) {
                    shuffleArray[idx][i] = shuffleArray[idx][i+1];

                  }
                  shuffleArray[idx][42 - 1]=h;
              }
              else if(idx == COLONIST){
                let h = shuffleArray[idx][0];

                  for (let i = 0; i < 14 - 1; ++i) {
                    shuffleArray[idx][i] = shuffleArray[idx][i+1];

                  }
                  shuffleArray[idx][14 - 1]=h;
                  //
                  h = shuffleArray[idx][14];

                  for (let i = 14; i < 36 - 1; ++i) {
                    shuffleArray[idx][i] = shuffleArray[idx][i+1];

                  }
                  shuffleArray[idx][36 - 1]=h;
              }
              else {
                let h = shuffleArray[idx][0];

                for (let i = 0; i < shuffleArray[idx].length - 1; ++i) {
                  shuffleArray[idx][i] = shuffleArray[idx][i+1];

                }
                shuffleArray[idx][shuffleArray[idx].length - 1]=h;                
              }
          }
          
          var selectorId = document.querySelector('.mdl-layout');
          selectorId.MaterialLayout.toggleDrawer();

 
          for(let idx=0; idx<MAX; ++idx){
              next(idx);

              let counter = 0;
              for(let i = 0; i<=IDXs[idx];++i){
                let h = shuffleArray[idx][i];
                if(DEL[idx][h] == 0){
                  if(idx == CONTRACT){
                    counter += contractArray[h] == contracts.selectedIndex;
                  }
                  else if(idx == COLONIST){
                    counter += colonistArray[h] == colonists.selectedIndex;
                  }
                  else           
                    counter++;
                }
              }

              while(c[idx]!= counter){
                prev(idx);

                counter = 0;
                for(let i = 0; i<=IDXs[idx];++i){
                  let h = shuffleArray[idx][i];
                  if(DEL[idx][h] == 0){
                    if(idx == CONTRACT){
                      counter += contractArray[h] == contracts.selectedIndex;
                    }
                    else if(idx == COLONIST){
                      counter += colonistArray[h] == colonists.selectedIndex;
                    }
                    else           
                      counter++;
                  }
                }
              }
              
          }
        }
        function removeCard(idx){
          init();
          let id = shuffleArray[idx][IDXs[idx]];
          DEL[idx][id]=1;
          next(idx);
        }
        function paint(idx){
          let id = shuffleArray[idx][IDXs[idx]];

          let RfG = 0;
          if(idx == 1 && thrusterRfG.selectedIndex == 1){
            RfG = 1;
          }
          else if(idx == 4 && refineryRfG.selectedIndex == 1){
            RfG = 1;
          }
          else if(idx == 5 && robonautRfG.selectedIndex == 1){
            RfG = 1;
          }

          let SRC = SRCDIR[idx];
          if(RfG){
            SRC += "RfG";
          }
          if(idx == CONTRACT){
            if(contracts.selectedIndex == 0)
              SRC += "1";
            if(contracts.selectedIndex == 1)
              SRC += "2";
            if(contracts.selectedIndex == 2)
              SRC += "3";
            if(contracts.selectedIndex == 3)
              SRC += "E";
          }
          SRC += "/card";
          if(idx == CONTRACT){
            if(contracts.selectedIndex == 0)
              SRC += String(id);
            if(contracts.selectedIndex == 1)
              SRC += String(id-12);
            if(contracts.selectedIndex == 2)
              SRC += String(id-12-12);
            if(contracts.selectedIndex == 3)
              SRC += String(id-12-12-12);
          }
          else
            SRC += String(id);
          SRC += ".jpg";

          let SRCb = SRCDIR[idx];
          if(RfG){
            SRCb += "RfG";
          }
          if(idx == CONTRACT){
            if(contracts.selectedIndex == 0)
              SRCb += "1";
            if(contracts.selectedIndex == 1)
              SRCb += "2";
            if(contracts.selectedIndex == 2)
              SRCb += "3";
            if(contracts.selectedIndex == 3)
              SRCb += "E";
          }

          SRCb += "/card";
          if(idx == CONTRACT){
            if(contracts.selectedIndex == 0)
              SRCb += String(id);
            if(contracts.selectedIndex == 1)
              SRCb += String(id-12);
            if(contracts.selectedIndex == 2)
              SRCb += String(id-12-12);
            if(contracts.selectedIndex == 3)
              SRCb += String(id-12-12-12);
          }
          else
            SRCb += String(id);
          SRCb += "b.jpg";

          if(NOTES[idx].length == 0 || NOTES[idx][id] == null){
            let note = "document.getElementById('note";
            note += String(idx);
            note += "').innerHTML ='';";
            eval(note);
          }
          else {
            let note = "document.getElementById('note";
            note += String(idx);
            note += "').innerHTML ='";
            note += NOTES[idx][id];
            note += "';";
            eval(note);

          }

          let OBJ = "img";
          OBJ += String(idx);
          OBJ += ".src = SRC;";
          let OBJb = "img";
          OBJb += String(idx);
          OBJb += "b.src = SRCb;";
          let CNT = "cnt";
          CNT += String(idx);
          CNT += ".innerHTML = '";

          
          let counter = 0;
          let nr_cards = 0;
          for(let i = 0; i<=IDXs[idx];++i){
            let h = shuffleArray[idx][i];

            if(DEL[idx][h] == 0){
              if(idx == CONTRACT){
                counter += contractArray[h] == contracts.selectedIndex;
              }
              else if(idx == COLONIST){
                counter += colonistArray[h] == colonists.selectedIndex;
              }
              else           
                counter++;
            }
          }
          for(let i = 0; i<=MAXs[idx];++i){
            

            if(DEL[idx][i] == 0){
              if(idx == CONTRACT){
                let h = shuffleArray[idx][i];
                nr_cards += contractArray[h] == contracts.selectedIndex;
              }
              else  if(idx == COLONIST){
                let h = shuffleArray[idx][i];
                nr_cards += colonistArray[h] == colonists.selectedIndex;
              }
              else           
                nr_cards++;
            }

          }


          //CNT += String(IDXs[idx]+1);
          CNT += String(counter);
          CNT += "/";
          //CNT += String(MAXs[idx]+1);
          CNT += String(nr_cards);
          CNT += "'";
          eval(OBJ);
          if(idx != SUMMARY)
            eval(OBJb);
          eval(CNT);

          if(idx == 0)
          {
            let OBJ = "M3img.src = M3IMG[id];";
            eval(OBJ );

            if(NOTES2[idx].length == 0 || NOTES2[idx][id] == null){
              let note = "document.getElementById('note_2_";
              note += String(idx);
              note += "').innerHTML ='';";
              eval(note);
            }
            else {
              let note = "document.getElementById('note_2_";
              note += String(idx);
              note += "').innerHTML ='";
              note += NOTES2[idx][id];
              note += "';";
              eval(note);

            }

          }
        }
        function next(idx){

            init();
     
            let id = 0;
            let cnt = 0;
            let next = 0;
            do{
              IDXs[idx]++;
              if(IDXs[idx] > MAXs[idx]) {
                  IDXs[idx] = 0;
              }
              id = shuffleArray[idx][IDXs[idx]];
              ++cnt;
              if(cnt > MAXs[idx]+1)
                break;
              
              next = DEL[idx][id]==1;
              if(!next && idx == CONTRACT){
                next = contractArray[id] != contracts.selectedIndex;
              }
              if(!next && idx == COLONIST){
                next = colonistArray[id] != colonists.selectedIndex;
              }

            } while(next);

            paint(idx);
            

        }
        function RfGChanged(idx){
          init();
          paint(idx);
        }
        function ContractChanged(idx){
          next(idx);
          prev(idx);
        }
        function ColonistChanged(idx){
          next(idx);
          prev(idx);
        }
        function prev(idx){

            init();
            let id = 0;
            let cnt = 0;
            let next = 0;
            do{
              if(IDXs[idx]>0)
                IDXs[idx]--;
              else
                IDXs[idx]=MAXs[idx];

              id = shuffleArray[idx][IDXs[idx]];
              ++cnt;
              if(cnt > MAXs[idx]+1)
                break;

              next = DEL[idx][id]==1;
              if(!next && idx ==CONTRACT){
                next = contractArray[id] != contracts.selectedIndex;
              }
              if(!next && idx == COLONIST){
                next = colonistArray[id] != colonists.selectedIndex;
              }

            } while(next);

            paint(idx);

        }
      
    </script>
</head>
<body>
    <!-- Always shows a header, even in smaller screens. -->
    <div class = "mdl-layout mdl-js-layout mdl-layout--fixed-header mdl-layout--fixed-tabs mdl-layout__header--scroll">
        <header class = "mdl-layout__header mdl-layout__header--scroll" >
           <!-- Top row, always visible -->
           <div class = "mdl-layout__header-row">
              <!-- Title -->
              <span class = "mdl-layout-title">High Frontier 4 All - Reference</span>          
           </div>
        
           <div class = "mdl-layout__tab-bar mdl-js-ripple-effect" id="tabbar">
              <a href = "#crew" class = "mdl-layout__tab is-active" id="crw">CRW</a>
              <a href = "#thruster" class = "mdl-layout__tab" id="thr">THR</a>
              <a href = "#generator" class = "mdl-layout__tab" id="gen">GEN</a>   
              <a href = "#reactor" class = "mdl-layout__tab" id="rea">REA</a>    
              <a href = "#refinery" class = "mdl-layout__tab" id="ref">REF</a>   
              <a href = "#robonaut" class = "mdl-layout__tab" id="rob">ROB</a>  
              <a href = "#radiator" class = "mdl-layout__tab" id="rad">RAD</a>    
              <a href = "#freighter" class = "mdl-layout__tab" id="fre">FRE</a>    
              <a href = "#gwthruster" class = "mdl-layout__tab" id="gw">GW</a>    
              <a href = "#bernal" class = "mdl-layout__tab" id="ber">BER</a>   
              <a href = "#colonist" class = "mdl-layout__tab" id="col">COL</a>  
              <a href = "#contract" class = "mdl-layout__tab" id="con">CON</a>  
              <a href = "#promo1" class = "mdl-layout__tab" id="X">X</a>  
              <a href = "#summary" class = "mdl-layout__tab" id="S">S</a>  
              <a href = "#PlayerBoard" class = "mdl-layout__tab" id="b">BOA</a>  
            </div>
            <div class = "mdl-tooltip" for = "crw">Crew</div>
            <div class = "mdl-tooltip" for = "thr">Thruster</div>
            <div class = "mdl-tooltip" for = "gen">Generator</div>
            <div class = "mdl-tooltip" for = "rea">Reactor</div>
            <div class = "mdl-tooltip" for = "ref">Refinery</div>
            <div class = "mdl-tooltip" for = "rob">Robonaut</div>
            <div class = "mdl-tooltip" for = "rad">Radiator</div>
            <div class = "mdl-tooltip" for = "fre">Freighter</div>
            <div class = "mdl-tooltip" for = "gw">GW/TW Thruster</div>
            <div class = "mdl-tooltip" for = "ber">Bernal</div>
            <div class = "mdl-tooltip" for = "col">Colonist</div>
            <div class = "mdl-tooltip" for = "con">Contract</div>
            <div class = "mdl-tooltip" for = "X">Project X</div>
            <div class = "mdl-tooltip" for = "T">Summary</div>

            <div class = "mdl-tooltip" for = "b">Boards</div>

           
        </header>
        
        <div class = "mdl-layout__drawer">
           <span class = "mdl-layout-title">HF4All</span>

           <nav class = "mdl-navigation">
              <a class = "mdl-navigation__link" href = "https://cutt.ly/hf4-core">Core Rules</a>
              <a class = "mdl-navigation__link" href = "https://cutt.ly/hf4-m1">M1 Terrawatt & Futures</a>    
              <a class = "mdl-navigation__link" href = "https://cutt.ly/hf4-m2">M2 Colonization</a>    
              <a class = "mdl-navigation__link" href = "https://cutt.ly/hf4-m3">M3 Conflict</a>    
              <a class = "mdl-navigation__link" href = "https://assets.adobe.com/id/urn:aaid:sc:US:e57a0306-5567-4fb9-ab6a-e677771faaad?view=published">M4 Exodus</a>   
              <a class = "mdl-navigation__link" href = "https://assets.adobe.com/id/urn:aaid:sc:US:96c76442-e2e7-4ba5-8ca1-f55e0967b697?view=published">M5 Economy</a> 
              <a class = "mdl-navigation__link" href = "https://boardgamegeek.com/thread/3194204/web-reference">Reference Thread</a>  
              <a class = "mdl-navigation__link" href = "https://github.com/LodronGerald/HF4AllReference">Source Code</a>   
              <a class = "mdl-navigation__link" href = "https://boardgamegeek.com/thread/2838108/hf4-coreappendixm1-3-living-rules-changes-2nd-prin">Core Changes Summary</a>
              <a class = "mdl-navigation__link" href = "https://iongamedesign.com/products/high-frontier-4-all">Iongamesdesing</a>       
              <hr>
              <a class = "mdl-navigation__link" onclick="randomShuffle()">Shuffle Cards</a>  
              <a class = "mdl-navigation__link" onclick="inspirationShuffle()">Inspiration Event</a>  
           </nav>
        </div>
        
        <main class = "mdl-layout__content">
           <section class = "mdl-layout__tab-panel is-active" id = "crew" style="text-align:center"> 
            
            <div id="cnt0" style="text-align:center">
                1/6
                
              </div>
              

            <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="prev(0)">
                <i class="material-icons">
                    arrow_back
                    </i>
              </button>
              <img src="crew/card0.jpg" alt="Italian Trulli" id="img0">
              <img src="crew/card0b.jpg" alt="Italian Trulli" id="img0b">
              <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="next(0)">
                <i class="material-icons">
                    arrow_forward
                    </i>
              </button>
              
              <div id="note0" style="text-align:center">
                
                <h6><b>Secretary General:</b> With this faction privilege, start the game with two extra Aquas. M2: The two Aquas are given when you Anchor your first Home Bernal.</h6>
                <h6><b>Blink Telescope:</b> With this faction privelege, for each prospecting attempt using a raygun platform, you are allowed a single reroll of any size roll (I6.3) made in a prospect operation.</h6>"
              </div>
              <img src="boards/M3yellow.jpg" alt="Italian Trulli" id="M3img">
              <div id="note_2_0" style="text-align:center">
                
              </div>
              <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="removeCard(0)">
                  <i class="material-icons">
                    close
                  </i>
                </button>
           </section>
           <section class = "mdl-layout__tab-panel" id = "thruster" style="text-align:center">
            
            <select class="mdl-textfield__input"  id="thrusterRfG" onChange="RfGChanged(1)">
                <option value="Core">Core</option>
                <option value="RfG">Race for Glory</option>
            </select>
            <div id="cnt1" style="text-align:center">
                1/12
              </div>

            <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="prev(1)">
               <i class="material-icons">
                   arrow_back
                   </i>
             </button>
             <img src="thruster/card0.jpg" alt="Italian Trulli" id="img1">
             <img src="thruster/card0b.jpg" alt="Italian Trulli" id="img1b">
             <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="next(1)">
               <i class="material-icons">
                   arrow_forward
                   </i>
             </button>
             <div id="note1" style="text-align:center">
            </div>
            <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="removeCard(1)">
                  <i class="material-icons">
                    close
                  </i>
                </button>
           </section>
           <section class = "mdl-layout__tab-panel" id = "generator" style="text-align:center">
            <div id="cnt2" style="text-align:center">
                1/17
              </div>
            <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="prev(2)">
               <i class="material-icons">
                   arrow_back
                   </i>
             </button>
             <img src="generator/card0.jpg" alt="Italian Trulli" id="img2">
             <img src="generator/card0b.jpg" alt="Italian Trulli" id="img2b">
             <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="next(2)">
               <i class="material-icons">
                   arrow_forward
                   </i>
             </button>
             <div id="note2" style="text-align:center">
            </div>
            <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="removeCard(2)">
                  <i class="material-icons">
                    close
                  </i>
                </button>
           </section>
           <section class = "mdl-layout__tab-panel" id = "reactor" style="text-align:center">
            <div id="cnt3" style="text-align:center">
                1/12
              </div>
            <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="prev(3)">
               <i class="material-icons">
                   arrow_back
                   </i>
             </button>
             <img src="reactor/card0.jpg" alt="Italian Trulli" id="img3">
             <img src="reactor/card0b.jpg" alt="Italian Trulli" id="img3b">
             <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="next(3)">
               <i class="material-icons">
                   arrow_forward
                   </i>
             </button>
             <div id="note3" style="text-align:center">
            </div>
            <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="removeCard(3)">
                  <i class="material-icons">
                    close
                  </i>
                </button>
           </section>
           <section class = "mdl-layout__tab-panel" id = "refinery" style="text-align:center">
            <select class="mdl-textfield__input"  id="refineryRfG" onChange="RfGChanged(4)">
                <option value="Core">Core</option>
                <option value="RfG">Race for Glory</option>
            </select>
            <div id="cnt4" style="text-align:center">
                1/12
              </div>
            <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="prev(4)">
               <i class="material-icons">
                   arrow_back
                   </i>
             </button>
             <img src="refinery/card0.jpg" alt="Italian Trulli" id="img4">
             <img src="refinery/card0b.jpg" alt="Italian Trulli" id="img4b">
             <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="next(4)">
               <i class="material-icons">
                   arrow_forward
                   </i>
             </button>
             <div id="note4" style="text-align:center">
            </div>
            <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="removeCard(4)">
                  <i class="material-icons">
                    close
                  </i>
                </button>
           </section>
           <section class = "mdl-layout__tab-panel" id = "robonaut" style="text-align:center">
            <select class="mdl-textfield__input"  id="robonautRfG" onChange="RfGChanged(5)">
                <option value="Core">Core</option>
                <option value="RfG">Race for Glory</option>
            </select>
            <div id="cnt5" style="text-align:center">
                1/12
              </div>
            <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="prev(5)">
               <i class="material-icons">
                   arrow_back
                   </i>
             </button>
             <img src="robonaut/card0.jpg" alt="Italian Trulli" id="img5">
             <img src="robonaut/card0b.jpg" alt="Italian Trulli" id="img5b">
             <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="next(5)">
               <i class="material-icons">
                   arrow_forward
                   </i>
             </button>
             <div id="note5" style="text-align:center">
            </div>
            <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="removeCard(5)">
                  <i class="material-icons">
                    close
                  </i>
                </button>
           </section>
           <section class = "mdl-layout__tab-panel" id = "radiator" style="text-align:center">
            <div id="cnt6" style="text-align:center">
                1/12
              </div>
            <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="prev(6)">
               <i class="material-icons">
                   arrow_back
                   </i>
             </button>
             <img src="radiator/card0.jpg" alt="Italian Trulli" id="img6">
             <img src="radiator/card0b.jpg" alt="Italian Trulli" id="img6b">
             <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="next(6)">
               <i class="material-icons">
                   arrow_forward
                   </i>
             </button>
             <div id="note6" style="text-align:center">
            </div>
            <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="removeCard(6)">
                  <i class="material-icons">
                    close
                  </i>
                </button>
           </section>
           <section class = "mdl-layout__tab-panel" id = "freighter" style="text-align:center">
            <div id="cnt7" style="text-align:center">
                1/7
              </div>
            <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="prev(7)">
               <i class="material-icons">
                   arrow_back
                   </i>
             </button>
             <img src="freighter/card0.jpg" alt="Italian Trulli" id="img7">
             <img src="freighter/card0b.jpg" alt="Italian Trulli" id="img7b">
             <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="next(7)">
               <i class="material-icons">
                   arrow_forward
                   </i>
             </button>
             <div id="note7" style="text-align:center">
              <button onClick="showTerraformFuture()">Show future positions on map</button>
            </div>
            <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="removeCard(7)">
                  <i class="material-icons">
                    close
                  </i>
                </button>
           </section>
           <section class = "mdl-layout__tab-panel" id = "gwthruster" style="text-align:center">
            <div id="cnt8" style="text-align:center">
                1/7
              </div>
            <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="prev(8)">
               <i class="material-icons">
                   arrow_back
                   </i>
             </button>
             <img src="gwthruster/card0.jpg" alt="Italian Trulli" id="img8">
             <img src="gwthruster/card0b.jpg" alt="Italian Trulli" id="img8b">
             <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="next(8)">
               <i class="material-icons">
                   arrow_forward
                   </i>
             </button>
             <div id="note8" style="text-align:center">
            </div>
            <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="removeCard(8)">
                  <i class="material-icons">
                    close
                  </i>
                </button>
           </section>
           <section class = "mdl-layout__tab-panel" id = "bernal" style="text-align:center">
            <div id="cnt9" style="text-align:center">
                1/12
              </div>
            <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="prev(9)">
               <i class="material-icons">
                   arrow_back
               </i>
             </button>
             <img src="bernal/card0.jpg" alt="Italian Trulli" id="img9">
             <img src="bernal/card0b.jpg" alt="Italian Trulli" id="img9b">
             <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="next(9)">
               <i class="material-icons">
                   arrow_forward
                   </i>
             </button>
             <div id="note9" style="text-align:center">
              <h6><b>M3 Note:</b> (Promoted) Your Crew and Bernals can fire Antimatter Bombs.</h6>";
            </div>
            <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="removeCard(9)">
                  <i class="material-icons">
                    close
                  </i>
                </button>
           </section>
           <section class = "mdl-layout__tab-panel" id = "colonist" style="text-align:center">
            <select class="mdl-textfield__input"  id="colonists" onChange="ColonistChanged(10)">
                <option value="0">Earthborns</option>
                <option value="1">Spaceborns</option>
            </select>

            <div id="cnt10" style="text-align:center">
                1/36
              </div>
            <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="prev(10)">
               <i class="material-icons">
                   arrow_back
                   </i>
             </button>
             <img src="colonist/card0.jpg" alt="Italian Trulli" id="img10">
             <img src="colonist/card0b.jpg" alt="Italian Trulli" id="img10b">
             <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="next(10)">
               <i class="material-icons">
                   arrow_forward
                   </i>
             </button>
             <div id="note10" style="text-align:center">
              <h6><b>New Venus Future (errata fix):</b> Req = Decommission this card and an Operational thruster with net thrust 7+ on an Industrialized Synodic Comet of yours. Effects = Bust both Venus and the Comet and Decommission all their tokens & unanchor any Bernals (represents the drop in property values prior to the comet-Venus collision), 12 VP.  Note: If this Future is completed, for thematic effect (with no game effect unless play is continued beyond the endgame), place the Venus overlay card (V8b) to show how New Venus will eventually appear.</h6>
              <h6><b>M3 Note on New Venus Future (1D5a, 3F2g):</b> Use the dislodge operation (3D7) to complete these Futures. Completion allows you to convert any Synodic Comet into a synodic dropstone, in which you do not need to pay a bribe.</h6>
        

            </div>
            <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="removeCard(10)">
                  <i class="material-icons">
                    close
                  </i>
                </button>
           </section>
           <section class = "mdl-layout__tab-panel" id = "contract" style="text-align:center">
            <select class="mdl-textfield__input"  id="contracts" onChange="ContractChanged(11)">
                <option selected value="0" >Freedom / Individuality</option>
                <option value="1">Honor / Unity</option>
                <option value="2">Equality / Authority</option>
                <option value="3">Exodus</option>
            </select>
            <div id="cnt11" style="text-align:center">
                1/12
              </div>
            <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="prev(11)">
               <i class="material-icons">
                   arrow_back
                   </i>
             </button>
             <img src="contract1/card0.jpg" alt="Italian Trulli" id="img11">
             <img src="contract1/card0b.jpg" alt="Italian Trulli" id="img11b">
             <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="next(11)">
               <i class="material-icons">
                   arrow_forward
                   </i>
             </button>
             <div id="note11" style="text-align:center">
            </div>
            <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="removeCard(11)">
                  <i class="material-icons">
                    close
                  </i>
                </button>
           </section>
           <section class = "mdl-layout__tab-panel" id = "promo1" style="text-align:center">
            <div id="cnt12" style="text-align:center">
                1/9
              </div>
            <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="prev(12)">
               <i class="material-icons">
                   arrow_back
                   </i>
             </button>
             <img src="promo1/card0.jpg" alt="Italian Trulli" id="img12">
             <img src="promo1/card0b.jpg" alt="Italian Trulli" id="img12b">
             <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="next(12)">
               <i class="material-icons">
                   arrow_forward
                   </i>
             </button>
             <div id="note12" style="text-align:center">
            </div>
            <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="removeCard(12)">
                  <i class="material-icons">
                    close
                  </i>
                </button>
           </section>
           <section class = "mdl-layout__tab-panel" id = "summary" style="text-align:center">
            <div id="cnt13" style="text-align:center">
                1/10
              </div>
            <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="prev(13)">
               <i class="material-icons">
                   arrow_back
                   </i>
             </button>
             <img src="tools/card0.jpg" alt="Italian Trulli" id="img13">
             <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="next(13)">
               <i class="material-icons">
                   arrow_forward
                   </i>
             </button>
             <div id="note13" style="text-align:center">
            </div>
            <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" onclick="removeCard(13)">
                  <i class="material-icons">
                    close
                  </i>
                </button>
           </section>
           <section class = "mdl-layout__tab-panel" id = "PlayerBoard" style="text-align:center">

            <div>
            
              <select class="mdl-textfield__input"  name="board" id="boards" onChange="boardChanged()">
                <option selected value="SOL" >SOL Sunspot Cycle</option>
                <option value="P">Player Board</option>
                <option value="B">Player Bernal Board</option>
                <option value="F">Player Freighter Board</option>
                <option value="M0">M0 Political Assembly</option>
                <option value="M3">M3 Political Assembly</option>
                <option value="M3VPs">M3 Victory Points</option>
                <option value="M3Battle">M3 Battle Chart</option>
                <option value="M4">M4 Isobank/Starship</option>
                <option value="M42">M4 Playmat</option>
                <option value="Map">Map</option>
                <option value="VMap">Venus Map</option>
              </select>

          <canvas id="canvas"></canvas>
            <div>
              <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" id="scrollToLeft" onclick="scrollToLeft()">
                <i class="material-icons">
                  arrow_back
                   </i>
                   </button>
                   <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" id="scrollToUp" onclick="scrollToUp()">
                <i class="material-icons">
                  arrow_upward
                   </i>
                   </button>
              <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" id="zoomOut" onclick="zoomOut()">
                <i class="material-icons">
                   remove
                   </i>
                   </button>

                             <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" id="zoomReset" onclick="zoomReset()">
                <i class="material-icons">
                   autorenew
                   </i>
                   </button>
                  

                   <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" id="zoomIn" onclick="zoomIn()">
                <i class="material-icons">
                   add
                   </i>
                   </button>
                   <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" id="scrollToDown" onclick="scrollToDown()">
              
              <i class="material-icons">
             arrow_downward
              </i>
              </button>
              <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored" id="scrollToRight" onclick="scrollToRight()">
              
              <i class="material-icons">
             arrow_forward
              </i>
              </button>
   
            </div>
            </div>
            <a data-target="#myModal" role="button" class="btn" data-toggle="modal">Side Finder</a>
            

          </section>
          


     </div>


     <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  
  <div class="modal-dialog">
  <div class="modal-content">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Side Finder</h3>
  </div>
  <div class="modal-body">
    <select id="findLocation">
      <option x=672 y=1804>1990OY</option>
<option x=429 y=1856>2002TX</option>
<option x=3870 y=6839>Achilles</option>
<option x=10089 y=2908>Aegis Moonlet</option>
<option x=6821 y=974>Aeneas</option>
<option x=3647 y=6146>Agamemnon</option>
<option x=3590 y=6391>Agamemnon Moonlet</option>
<option x=4570 y=4257>Alexhelios</option>
<option x=7809 y=918>Antenor</option>
<option x=7570 y=3970>Apophis</option>
<option x=5182 y=3553>Ariadne</option>
<option x=1452 y=3060>Ariel</option>
<option x=1108 y=2025>Arrokoth</option>
<option x=1949 y=3254>Asbolus</option>
<option x=4223 y=5140>Badenia</option>
<option x=3459 y=5015>Bee-Zed</option>
<option x=5171 y=5253>Belenus</option>
<option x=1780 y=3794>Belinda</option>
<option x=6083 y=5088>Bennu</option>
<option x=3803 y=4074>Callisto Asgard Ice Spires</option>
<option x=3919 y=3759>Callisto Valhalla</option>
<option x=812 y=6477>Calypso</option>
<option x=9405 y=2393>Ceres</option>
<option x=1029 y=4719>Chariklo</option>
<option x=970 y=2532>Charon</option>
<option x=6294 y=2523>Chaucer</option>
<option x=9043 y=444>Chiron</option>
<option x=5073 y=2909>Churynmov-Gerasimenko</option>
<option x=4695 y=3646>Cleoselene</option>
<option x=7886 y=1376>Comet Borrelly</option>
<option x=2523 y=4829>Comet Crommelin</option>
<option x=5423 y=2362>Comet Elst-Pizarro</option>
<option x=5834 y=2344>Comet Encke</option>
<option x=2450 y=2595>Comet Halley</option>
<option x=4361 y=4664>Comet Hartley 2</option>
<option x=9660 y=1821>Comet Holmes</option>
<option x=1143 y=614>Comet McNaught</option>
<option x=5393 y=1085>Comet Neujmin 1</option>
<option x=5953 y=5786>Comet Phaethon</option>
<option x=2875 y=4580>Comet Schwassmann-Wachmann 1</option>
<option x=10511 y=3330>Comet Tempel 1</option>

<option x=3945 y=5887>Comet Wild 2</option>
<option x=4557 y=5147>Comet Wilson-Harrington</option>
<option x=1308 y=4291>Cordelia</option>
<option x=8991 y=6429>Cruithne</option>
<option x=7615 y=2046>Dactyl Moonlet</option>
<option x=7297 y=1547>Davida</option>
<option x=10317 y=4011>Deimos</option>
<option x=2301 y=2199>Despina</option>
<option x=7922 y=2555>Didymos</option>
<option x=8349 y=2594>Didymos Moonlet</option>
<option x=1115 y=6916>Dione</option>
<option x=8006 y=2135>Dresda</option>
<option x=3910 y=1423>Echelus</option>
<option x=9454 y=1993>Eichsfeldia</option>
<option x=3935 y=2790>Elara</option>
<option x=9642 y=526>Elatus</option>
<option x=921 y=5681>Enceladus</option>
<option x=1967 y=5446>Epimetheus</option>
<option x=8100 y=3104>Eros</option>
<option x=10195 y=5984>Eureka</option>
<option x=2986 y=4024>Europa Conamara Chaos</option>
<option x=3036 y=3709>Europa Subsurface Ocean</option>
<option x=5470 y=3098>Flora</option>
<option x=4443 y=6342>Fortuna</option>
<option x=3990 y=4627>Friederike</option>
<option x=2523 y=1976>Galatea</option>
<option x=3316 y=4176>Ganymede Memphis Facula</option>
<option x=3529 y=3972>Ganymede Uruk Sulcus</option>
<option x=5006 y=3351>Gaspra</option>
<option x=9823 y=2407>Gefion</option>
<option x=9173 y=907>Glaukos</option>
<option x=6966 y=5482>Hathor</option>
<option x=861 y=713>Haumea</option>
<option x=3245 y=6495>Hektor</option>
<option x=1456 y=6611>Helene</option>
<option x=4704 y=6423>Hermes A</option>
<option x=4996 y=6721>Hermes B</option>
<option x=6085 y=2572>Hertha</option>
<option x=874 y=975>Hi'iaka</option>
<option x=4054 y=2388>Himalia</option>
<option x=3117 y=866>Huya</option>
<option x=694 y=2848>Hydra</option>
<option x=4141 y=5402>Hygiea</option>
<option x=1716 y=2950>Hylonome</option>
<option x=2420 y=6100>Hyperion</option>
<option x=2409 y=5452>Iapetus</option>
<option x=3278 y=5237>Icarion</option>
<option x=6345 y=4332>Icarus</option>
<option x=7851 y=1976>Ida</option>
<option x=3875 y=2143>Io Gish Bar Mons</option>
<option x=3666 y=2321>Io Loki Patera</option>
<option x=6572 y=6554>Itokawa</option>
<option x=4931 y=5727>Ivar</option>
<option x=2124 y=5656>Janus</option>
<option x=1493 y=4180>Juliet</option>
<option x=7901 y=1697>Karin A</option>
<option x=7570 y=1707>Karin B</option>
<option x=7241 y=1921>Karin C</option>
<option x=6489 y=5393>Khufu</option>
<option x=4397 y=4009>Kleopatra</option>
<option x=9206 y=2137>Kollaa</option>
<option x=8332 y=1901>Koronis</option>
<option x=2157 y=4048>Kreutz Sungrazer</option>
<option x=8333 y=2169>Lacrimosa</option>
<option x=7490 y=940>Laocoon</option>
<option x=2684 y=2684>Larissa</option>
<option x=4254 y=2576>Leda</option>
<option x=9215 y=5095>Luna Aristarchus Plateau</option>
<option x=9477 y=5109>Luna Shackleton Polar Rim</option>
<option x=4790 y=6197>Lutetia</option>
<option x=4335 y=2271>Lysithea</option>
<option x=9646 y=3784>Mars Arsia Mons Caves</option>
<option x=9935 y=3526>Mars Hellas Basin Buried Glaciers</option>
<option x=9563 y=3505>Mars North Pole</option>
<option x=4424 y=5547>Mathilde</option>
<option x=8563 y=919>Menoetius</option>
<option x=7564 y=5419>Mercury Discovery Rupes</option>
<option x=7767 y=5617>Mercury North Pole</option>
<option x=1265 y=5345>Methone</option>
<option x=9913 y=2586>Miahelena</option>
<option x=1554 y=5326>Mimas</option>
<option x=9807 y=2776>Minerva</option>
<option x=1664 y=3351>Miranda</option>
<option x=5998 y=4653>Mjolnir</option>
<option x=391 y=1028>Namaka</option>
<option x=8081 y=1859>Neckar</option>
<option x=1849 y=2115>Neptune Aerostat</option>
<option x=1150 y=2290>Nereid</option>
<option x=8462 y=2872>Nereus</option>
<option x=3021 y=6383>Nestor</option>
<option x=374 y=2620>Nix</option>
<option x=6671 y=2274>Nysa</option>
<option x=10455 y=6186>Nyx</option>
<option x=396 y=3108>Oberon</option>
<option x=4736 y=690>Okyrhoe</option>
<option x=8959 y=2507>Oljato</option>
<option x=2153 y=5888>Pandora</option>
<option x=9096 y=1231>Patroclus</option>
<option x=8918 y=8918>Peking</option>
<option x=3137 y=5494>Philoctetes</option>
<option x=9754 y=4158>Phobos</option>
<option x=1628 y=4659>Phoebe</option>
<option x=4237 y=579>Pholus</option>
<option x=393 y=2148>Pluto</option>
<option x=6395 y=2195>Polana</option>
<option x=834 y=6703>Polydeuces</option>
<option x=1639 y=3997>Portia</option>
<option x=1981 y=6299>Prometheus</option>
<option x=814 y=4592>Prospero</option>
<option x=2775 y=1537>Proteus</option>
<option x=8085 y=1506>Psyche</option>
<option x=1779 y=3584>Puck</option>
<option x=3597 y=365>Quaoar</option>
<option x=4450 y=3577>Remus Moonlet</option>
<option x=1781 y=6925>Rhea</option>
<option x=4279 y=3748>Romulus Moonlet</option>
<option x=1268 y=2628>Sao</option>
<option x=1626 y=6311>Saturn Aerostat</option>
<option x=1604 y=895>Sawiakera</option>
<option x=379 y=737>Sedna</option>
<option x=919 y=4299>Setebos</option>
<option x=3076 y=6810>Skamandrios Moonlet</option>
<option x=1996 y=4884>Skoll</option>
<option x=1825 y=4421>Suttungr</option>
<option x=1034 y=4468>Sycorax</option>
<option x=4636 y=3341>Sylvia</option>
<option x=1951 y=391>Teharonhiawako</option>
<option x=3090 y=6116>Telamon</option>
<option x=1255 y=6054>Telesto</option>
<option x=872 y=6038>Tethys</option>
<option x=2016 y=4520>Thymr</option>
<option x=2687 y=6811>Titan Aerostat</option>
<option x=2542 y=6308>Titan Kraken Mare</option>
<option x=2530 y=6654>Titan Ontario Lacus</option>
<option x=857 y=3072>Titania</option>
<option x=6614 y=1142>Tithonus</option>
<option x=5545 y=5039>Toro</option>
<option x=2545 y=1042>Triton Mahilani Plume</option>
<option x=2685 y=1260>Triton Tuonela Planitia</option>
<option x=1187 y=2997>Umbriel</option>
<option x=9181 y=1714>Unitas</option>
<option x=1026 y=4097>Uranus Aerostat</option>
<option x=8582 y=2069>Urda</option>
<option x=7369 y=6108>Venus Aerostat-Xity</option>
<option x=8584 y=1770>Vesta</option>
<option x=3359 y=865>Weywot</option>
<option x=1476 y=4864>Ymir</option>
<option x=8353 y=3730>YORP</option>

          </select>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary"  data-dismiss="modal" aria-hidden="true" onClick="findSide()">Find</button>
  </div>
  </div>
  </div>
</div>
</body>
</html>